<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Not HermitCraft SMP</title>
  <link rel="icon" type="image/png" href="../media/favicon.png" />
  <link rel="stylesheet" href="../media/style.css" />
  <link href="https://fonts.bunny.net/css?family=Space+Grotesk:wght@500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
</head>

<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="../media/navigation.js"></script>
  
  <!-- Navigation containers - content will be dynamically generated -->
  <div id="desktop-nav-container"></div>
  <div id="mobile-nav-container"></div>
  <div class="mainflex">
    <div class="main1 aboutlogo">
      <div class="main1_description">
        <h1 class="about-title">Who We Are</h1>
        <p class="about-subtitle">Meet our amazing team of administrators, moderators, and event hosts who make our community special!</p>
        <p class="about-instruction">Click on each role to learn more about our team members</p>
      </div>

      <div id="about"></div>
      <div class="main5">
        <!-- Dropdown menus will be dynamically generated here -->
      </div>
      <script>
        // Fetch data from a JSON file
        fetch('../data/members.json')
          .then((response) => response.json())
          .then((data) => {
            const main5 = document.querySelector('.main5');

            // Iterate through each group in the JSON
            Object.keys(data).forEach((group, index) => {
              const groupData = data[group];
              const groupDiv = document.createElement('div');
              groupDiv.classList.add('rolegroup');
              groupDiv.classList.add('main5_supporters_div');
              
              // Create the group header with icon
              const groupHeader = document.createElement('div');
              groupHeader.classList.add('group-header');
              groupHeader.innerHTML = `
                <span class="group-title">${group}</span>
                <i class="fa fa-chevron-down group-arrow"></i>
              `;
              groupHeader.onclick = () => {
                const content = groupDiv.querySelector('.group-content');
                const arrow = groupDiv.querySelector('.group-arrow');
                const isVisible = content.style.display === 'grid';
                
                content.style.display = isVisible ? 'none' : 'grid';
                arrow.style.transform = isVisible ? 'rotate(0deg)' : 'rotate(180deg)';
                
                // Add expand animation
                if (!isVisible) {
                  content.style.opacity = '0';
                  setTimeout(() => {
                    content.style.opacity = '1';
                  }, 50);
                }
              };

              // Add group description
              const groupDescription = document.createElement('p');
              groupDescription.classList.add('group-description');
              groupDescription.textContent = groupData.groupabout;

              // Create the group content container
              const groupContent = document.createElement('div');
              groupContent.classList.add('group-content');
              groupContent.style.display = index === 0 ? 'grid' : 'none'; // Show first group by default

              // Iterate through each player in the group
              groupData.players.forEach((member) => {
                const memberDiv = document.createElement('div');
                memberDiv.classList.add('member');
                memberDiv.classList.add('member-card');
                
                const memberHeader = document.createElement('div');
                memberHeader.classList.add('member-header');
                
                const img = document.createElement('img');
                img.classList.add('member-img');
                img.src = `https://mc-heads.net/avatar/${member.name}.png`;
                img.alt = `${member.name} avatar`;
                img.onerror = function() {
                  this.src = '../media/member_placeholder.webp';
                };
                
                const memberInfo = document.createElement('div');
                memberInfo.classList.add('member-info');
                
                const name = document.createElement('h3');
                name.classList.add('member-name');
                if(member.link && member.link !== "") {
                  const nameLink = document.createElement('a');
                  nameLink.href = member.link;
                  nameLink.textContent = member.name;
                  nameLink.target = '_blank';
                  nameLink.classList.add('member-name-link');
                  name.appendChild(nameLink);
                } else {
                  name.textContent = member.name;
                }

                const rank = document.createElement('span');
                rank.classList.add('member-rank');
                rank.textContent = member.role;

                memberInfo.appendChild(name);
                memberInfo.appendChild(rank);
                memberHeader.appendChild(img);
                memberHeader.appendChild(memberInfo);

                const about = document.createElement('div');
                about.classList.add('member-about');
                if (member.about && member.about.trim() !== '') {
                  about.innerHTML = member.about.replace(/\n/g, '<br />');
                } else {
                  about.innerHTML = '<em>This member prefers to remain mysterious...</em>';
                }

                memberDiv.appendChild(memberHeader);
                memberDiv.appendChild(about);
                groupContent.appendChild(memberDiv);
              });

              groupDiv.appendChild(groupHeader);
              groupDiv.appendChild(groupDescription);
              groupDiv.appendChild(groupContent);
              main5.appendChild(groupDiv);
              
              // Set initial arrow state for first group
              if (index === 0) {
                const arrow = groupDiv.querySelector('.group-arrow');
                arrow.style.transform = 'rotate(180deg)';
              }
            });
          })
          .catch((error) => console.error('Error loading members.json:', error));
      </script>
    </div>
  </div>
  <footer class="copyright_div">
    <a href="https://github.com/FQQD/MCServer-Web-Template" class="copyright">Made by FQQD 2023 - Edited by Dakota -
      HeruEdhel 2025</a>
  </footer>
</body>

</html>